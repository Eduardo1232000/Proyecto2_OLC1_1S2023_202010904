<!DOCTYPE html>
<html>
<head>
	<title><%= title %></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/codemirror/lib/codemirror.css">
    <script src="/codemirror/lib/codemirror.js"></script>

     <script src="/codemirror/lib/codemirror.js"></script>
     <script src="/codemirror/mode/clike/clike.js"></script>
     <link rel="stylesheet" href="/codemirror/lib/codemirror.css"/>
     <script src="/codemirror/mode/javascript/javascript.js"></script>       
     <link href="/codemirror/theme/midnight.css" rel="stylesheet" />      
     <script src="/codemirror/addon/edit/closebrackets.js"></script>      
     <script src="/codemirror/addon/selection/active-line.js"></script>
</head>
<body style="background-color:#2A302F;">
    <nav class="navbar navbar-dark bg-dark mb-3">
        <a class="navbar-brand" href="#">
            TypeWise
            &nbsp &nbsp &nbsp &nbsp
            <button id="boton_home" type="submit" class="btn btn-primary w-20" >Home</button> 
            <button id="boton_editor" type="submit" class="btn btn-primary w-20" >Editor</button>  
            <button id="boton_compilador" type="submit" class="btn btn-primary w-20">Compilador</button>
            <button id="boton_reportes"type="submit"class="btn btn-primary w-20 ">Reportes</button>
        </a>
      </nav>
    <font color="white">
    <input id="fileInput" accept=".tw" type="file" size="10" onchange="processFiles(this.files)"><br>
    <div class="row">
        <div class="col-6"><h2>Entrada</h2></div>
        <div class="col-6"><h2>Salida</h2></div>
    </div>
    
    </font>
    <div class="row">
    </div>
    <div class="row">
        <div class="col-6">
            <form method="POST" action="/ejecutar">
                <textarea  id="editor" name="codigo" ><%= codigo %></textarea><br>
                <p style="text-align: center;">
                    <button type="submit" class="btn btn-outline-success w-50 btn-lg" > Analizar Entrada</button> 
                </p>
            </form>
        </div>
        <div class="col-6"> 
            <div class="row">
                <div class="col-2">
                    <textarea id="consola" name="textarea" ><%= salida %></textarea>
                </div>
            </div>
        </div>   
    </div>

    <script>
    boton_home.addEventListener("click",(e) =>{
        window.location.href = "http://localhost:3000/";
    })

    boton_editor.addEventListener("click",(e) =>{
        window.location.href = "http://localhost:3000/editor";
    })

    boton_compilador.addEventListener("click",(e) =>{
        window.location.href = "http://localhost:3000/compilador";
    })

    boton_reportes.addEventListener("click", (e) =>{
        window.location.href = "http://localhost:3000/reportes"; 
    })
        let editor = CodeMirror.fromTextArea(document.getElementById("editor"),{
                    lineNumbers         : true,
                    mode                : "text/x-java",
                    theme               : "midnight",
                    autoCloseBrackets   : true,
                    //lineWrapping : true,
                    styleActiveLine     : true
                });
        editor.setSize("730","400");
        let editor2 = CodeMirror.fromTextArea(document.getElementById("consola"),{
                    lineNumbers         : true,
                    mode                : "text/x-java",
                    theme               : "midnight",
                    autoCloseBrackets   : true,
                    readonly:true,
                    styleActiveLine     : true
                });
        editor2.setSize("730","400");

        function processFiles(files) {    //IMPORTAR CONTENIDO A TEXTAREA
        var file = files[0];
        var reader = new FileReader();
        reader.onload = function (e) {
        // Cuando éste evento se dispara, los datos están ya disponibles.
        // Se trata de copiarlos a una área <div> en la página.
        editor.setValue(e.target.result)
        //editor.textContent = e.target.result;  //para un textarea normal
        };
        reader.readAsText(file);
        }
    </script>
</body>
</html>