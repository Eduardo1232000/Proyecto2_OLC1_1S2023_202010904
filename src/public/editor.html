<!DOCTYPE html>
<html lang="en">
  <head>

    <link rel="stylesheet" href="codemirror/doc/docs.css">

    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="codemirror/theme/3024-day.css">
    <link rel="stylesheet" href="codemirror/theme/3024-night.css">
    <link rel="stylesheet" href="codemirror/theme/abbott.css">
    <link rel="stylesheet" href="codemirror/theme/abcdef.css">
    <link rel="stylesheet" href="codemirror/theme/ambiance.css">
    <link rel="stylesheet" href="codemirror/theme/ayu-dark.css">
    <link rel="stylesheet" href="codemirror/theme/ayu-mirage.css">
    <link rel="stylesheet" href="codemirror/theme/base16-dark.css">
    <link rel="stylesheet" href="codemirror/theme/bespin.css">
    <link rel="stylesheet" href="codemirror/theme/base16-light.css">
    <link rel="stylesheet" href="codemirror/theme/blackboard.css">
    <link rel="stylesheet" href="codemirror/theme/cobalt.css">
    <link rel="stylesheet" href="codemirror/theme/colorforth.css">
    <link rel="stylesheet" href="codemirror/theme/dracula.css">
    <link rel="stylesheet" href="codemirror/theme/duotone-dark.css">
    <link rel="stylesheet" href="codemirror/theme/duotone-light.css">
    <link rel="stylesheet" href="codemirror/theme/eclipse.css">
    <link rel="stylesheet" href="codemirror/theme/elegant.css">
    <link rel="stylesheet" href="codemirror/theme/erlang-dark.css">
    <link rel="stylesheet" href="codemirror/theme/gruvbox-dark.css">
    <link rel="stylesheet" href="codemirror/theme/hopscotch.css">
    <link rel="stylesheet" href="codemirror/theme/icecoder.css">
    <link rel="stylesheet" href="codemirror/theme/isotope.css">
    <link rel="stylesheet" href="codemirror/theme/juejin.css">
    <link rel="stylesheet" href="codemirror/theme/lesser-dark.css">
    <link rel="stylesheet" href="codemirror/theme/liquibyte.css">
    <link rel="stylesheet" href="codemirror/theme/lucario.css">
    <link rel="stylesheet" href="codemirror/theme/material.css">
    <link rel="stylesheet" href="codemirror/theme/material-darker.css">
    <link rel="stylesheet" href="codemirror/theme/material-palenight.css">
    <link rel="stylesheet" href="codemirror/theme/material-ocean.css">
    <link rel="stylesheet" href="codemirror/theme/mbo.css">
    <link rel="stylesheet" href="codemirror/theme/mdn-like.css">
    <link rel="stylesheet" href="codemirror/theme/midnight.css">
    <link rel="stylesheet" href="codemirror/theme/monokai.css">
    <link rel="stylesheet" href="codemirror/theme/moxer.css">
    <link rel="stylesheet" href="codemirror/theme/neat.css">
    <link rel="stylesheet" href="codemirror/theme/neo.css">
    <link rel="stylesheet" href="codemirror/theme/night.css">
    <link rel="stylesheet" href="codemirror/theme/nord.css">
    <link rel="stylesheet" href="codemirror/theme/oceanic-next.css">
    <link rel="stylesheet" href="codemirror/theme/panda-syntax.css">
    <link rel="stylesheet" href="codemirror/theme/paraiso-dark.css">
    <link rel="stylesheet" href="codemirror/theme/paraiso-light.css">
    <link rel="stylesheet" href="codemirror/theme/pastel-on-dark.css">
    <link rel="stylesheet" href="codemirror/theme/railscasts.css">
    <link rel="stylesheet" href="codemirror/theme/rubyblue.css">
    <link rel="stylesheet" href="codemirror/theme/seti.css">
    <link rel="stylesheet" href="codemirror/theme/shadowfox.css">
    <link rel="stylesheet" href="codemirror/theme/solarized.css">
    <link rel="stylesheet" href="codemirror/theme/the-matrix.css">
    <link rel="stylesheet" href="codemirror/theme/tomorrow-night-bright.css">
    <link rel="stylesheet" href="codemirror/theme/tomorrow-night-eighties.css">
    <link rel="stylesheet" href="codemirror/theme/ttcn.css">
    <link rel="stylesheet" href="codemirror/theme/twilight.css">
    <link rel="stylesheet" href="codemirror/theme/vibrant-ink.css">
    <link rel="stylesheet" href="codemirror/theme/xq-dark.css">
    <link rel="stylesheet" href="codemirror/theme/xq-light.css">
    <link rel="stylesheet" href="codemirror/theme/yeti.css">
    <link rel="stylesheet" href="codemirror/theme/idea.css">
    <link rel="stylesheet" href="codemirror/theme/darcula.css">
    <link rel="stylesheet" href="codemirror/theme/yonce.css">
    <link rel="stylesheet" href="codemirror/theme/zenburn.css">
    <script src="codemirror/lib/codemirror.js"></script>
    <script src="codemirror/mode/javascript/javascript.js"></script>
    <script src="codemirror/addon/selection/active-line.js"></script>
    <script src="codemirror/addon/edit/matchbrackets.js"></script>
    <style>
      .CodeMirror {border: 1px solid black; font-size:20px;width: 1000px;left: 250px;}
    </style>








    <link rel="stylesheet" type="text/css" href="estilos.css" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeWise</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <script type="text/javascript" charset="utf8" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  </head>
  <body style="background-color:#2A302F;">
    <nav class="navbar navbar-dark bg-dark mb-5">
      <a class="navbar-brand" href="#">
        <img
          src="./assets/logo.png"
          width="30"
          height="30"
          class="d-inline-block align-top"
          alt=""
        />
        TypeWise
        &nbsp &nbsp &nbsp &nbsp
        <button id="boton_home" type="submit" class="btn btn-primary w-20" >
          Home
        </button>
        
        <button id="boton_editor" type="submit" class="btn btn-primary w-20" >
          Editor
        </button>

        <button id="boton_compilador" type="submit" class="btn btn-primary w-20" >
          Compilador
        </button>
        <button id="boton_reportes"type="submit"class="btn btn-primary w-20 "  >
          Reportes
        </button>
      </a>
    </nav>
    <font color="white">
      <center>
    <label id="titulo"><H1>EDITOR DE ARCHIVOS</H1></label>
    <div class="row">
    </center>
        
      &nbsp &nbsp &nbsp &nbsp

      <button id="boton_nuevo" type="submit" class="btn btn-primary w-20" >
        Nuevo
      </button>
      &nbsp

      <button id="boton_guardar" type="submit" class="btn btn-primary w-20" >
        Guardar
      </button>
      &nbsp
      
      <button id="boton_guardar_como" type="submit" class="btn btn-primary w-20" >
        Guardar Como
      </button>
      <textarea id="nombre_guardar_como" name="nombre_arch" rows="1" cols="30" style="background-color:#2A302F;color:white;" .style.visibility = 'hidden'>Nuevo.tw</textarea> 
      <button id="boton_guardar_exito" type="submit" class="btn btn-success w-20" >
        Guardar con este nombre
      </button>
      
<br>
    </div>
    <br>
    <input id="fileInput" accept=".tw"type="file" size="10" onchange="processFiles(this.files)">
    <br>
    <div class="row">
      
      <div class="col-6" id="centrar_div">
        <br>
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <textarea readonly id="nombre_archivo" name="nombre_arch" rows="1" cols="50" style="background-color:#2A302F;color:white;">Nuevo.tw</textarea> 
      </div>
    
    </div>

    
    <div class="row">
      <div class="col" id="">
        <textarea id="editor" name="editor" rows="15" cols="122"></textarea> 
      </div>


      </div>
    </div>
    <div class="row">
      <div class="col-6">
      
        <p>Tema de Codemirror: <select onchange="selectTheme()" id="select">
        </font>
          <option>3024-night</option>
          <option>abbott</option>
          <option>abcdef</option>
          <option>ambiance</option>
          <option selected>ayu-dark</option>
          <option>ayu-mirage</option>
          <option>base16-dark</option>
          <option>bespin</option>
          <option>blackboard</option>
          <option>cobalt</option>
          <option>colorforth</option>
          <option>darcula</option>
          <option>dracula</option>
          <option>duotone-dark</option>
          <option>erlang-dark</option>
          <option>gruvbox-dark</option>
          <option>hopscotch</option>
          <option>icecoder</option>
          <option>isotope</option>
          <option>lesser-dark</option>
          <option>liquibyte</option>
          <option>lucario</option>
          <option>material</option>
          <option>material-darker</option>
          <option>material-palenight</option>
          <option>material-ocean</option>
          <option>mbo</option>
          <option>midnight</option>
          <option>monokai</option>
          <option>moxer</option>
          <option>night</option>
          <option>nord</option>
          <option>oceanic-next</option>
          <option>panda-syntax</option>
          <option>paraiso-dark</option>
          <option>pastel-on-dark</option>
          <option>railscasts</option>
          <option>rubyblue</option>
          <option>seti</option>
          <option>shadowfox</option>
          <option>the-matrix</option>
          <option>tomorrow-night-bright</option>
          <option>tomorrow-night-eighties</option>
          <option>twilight</option>
          <option>vibrant-ink</option>
          <option>xq-dark</option>
          <option>yonce</option>
          <option>zenburn</option>
      </select>
      </p>
      </div>

    </div>
    

      
    <script>

      
      let nombre_archivo = document.getElementById("nombre_archivo");
      
      let archivo = document.getElementById("directory");
      var nombre_guardar_como = document.getElementById('nombre_guardar_como');
      var boton_guardar_exito = document.getElementById('boton_guardar_exito');
      let nombre_archivo_seleccionado = document.getElementById('fileInput')

      //------------------------------------------------------------------------CODEMIRROR
      let editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
        lineNumbers: true,
        mode       : "text/x-java",
        theme      : "ayu-dark",
        autoCloseBrackets : true,
        styleActiveLine: true
      });

      
      //------------------------------------------------------------------------CODEMIRROR 

      boton_home.addEventListener("click",(e) =>{
        window.location.href = "http://localhost:3000/";
      })

      boton_editor.addEventListener("click",(e) =>{

        window.location.href = "http://localhost:3000/editor";
      })

      boton_compilador.addEventListener("click",(e) =>{
        window.location.href = "http://localhost:3000/compilador";
      })

      boton_reportes.addEventListener("click", (e) =>{
        window.location.href = "http://localhost:3000/reportes";
        
      })

      boton_nuevo.addEventListener("click", (e) =>{
        editor.setValue("")
        nombre_archivo.value="Nuevo.tw";
      })
      boton_guardar.addEventListener("click", (e) =>{
        download(nombre_archivo.value, editor.getValue());
      })

      boton_guardar_como.addEventListener("click", (e) =>{  
        nombre_guardar_como.value = "";      
        nombre_guardar_como.style.visibility = 'visible';
        boton_guardar_exito.style.visibility = 'visible';
        
      })
      boton_guardar_exito.addEventListener("click", (e) =>{
        
        nombre_guardar_como.style.visibility = 'hidden';
        boton_guardar_exito.style.visibility = 'hidden';
        nombre_archivo.value = nombre_guardar_como.value
        download(nombre_guardar_como.value, editor.getValue());
      })
      //--------IMPORTAR TEXTO DE ARCHIVO A TEXTAREA-------------
      function processFiles(files) {    //IMPORTAR CONTENIDO A TEXTAREA
      var file = files[0];
      var reader = new FileReader();
      reader.onload = function (e) {
      // Cuando éste evento se dispara, los datos están ya disponibles.
      // Se trata de copiarlos a una área <div> en la página.
      editor.setValue(e.target.result)
      };
      reader.readAsText(file);
      nombre_archivo.value = file.name;
      }
      //--------------------------------------------------------

      //--------------------------------- CREAR ARCHIVO Y DESCARGARLO ---------------------------------
      function download(filename, textInput) {    
      var element = document.createElement('a');
      element.setAttribute('href','data:text/plain;charset=utf-8, ' + encodeURIComponent(textInput));
      element.setAttribute('download', filename);
      document.body.appendChild(element);
      element.click();
      //document.body.removeChild(element);
      }
      //-----------------------------------------------------------------------------------------------
      
      var input = document.getElementById("select");
      function selectTheme() {
        var theme = input.options[input.selectedIndex].textContent;
        editor.setOption("theme", theme);
        editor2.setOption("theme", theme);
        location.hash = "#" + theme;
      }
      
      var choice = (location.hash && location.hash.slice(1)) ||
                  (document.location.search &&
                    decodeURIComponent(document.location.search.slice(1)));
      if (choice) {
        input.value = choice;
        editor.setOption("theme", choice);
        editor2.setOption("theme", choice);
      }
      CodeMirror.on(window, "hashchange", function() {
        var theme = location.hash.slice(1);
        if (theme) { input.value = theme; selectTheme(); }
      });

      
    </script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>